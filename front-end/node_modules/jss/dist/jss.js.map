{"version":3,"file":"jss.js","sources":["../node_modules/is-in-browser/dist/module.js","../src/utils/linkRule.js","../node_modules/warning/warning.js","../src/utils/toCssValue.js","../src/utils/toCss.js","../src/rules/StyleRule.js","../node_modules/symbol-observable/lib/ponyfill.js","../node_modules/symbol-observable/lib/index.js","../node_modules/symbol-observable/index.js","../src/utils/isObservable.js","../src/utils/cloneStyle.js","../src/utils/createRule.js","../src/utils/escape.js","../src/RuleList.js","../src/StyleSheet.js","../src/PluginsRegistry.js","../src/rules/SimpleRule.js","../src/rules/KeyframesRule.js","../src/rules/ConditionalRule.js","../src/rules/FontFaceRule.js","../src/rules/ViewportRule.js","../src/plugins/rules.js","../src/plugins/observables.js","../src/plugins/functions.js","../src/SheetsRegistry.js","../src/sheets.js","../src/utils/moduleId.js","../src/utils/createGenerateClassName.js","../src/renderers/DomRenderer.js","../src/renderers/VirtualRenderer.js","../src/Jss.js","../src/utils/getDynamicStyles.js","../src/SheetsManager.js","../src/index.js"],"sourcesContent":["var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexport var isBrowser = (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\" && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) === 'object' && document.nodeType === 9;\n\nexport default isBrowser;\n","/**\n * Link rule with CSSStyleRule and nested rules with corresponding nested cssRules if both exists.\n */\nexport default function linkRule(rule: Rule, cssRule: CSSOMRule): void {\n  rule.renderable = cssRule\n  if (rule.rules && cssRule.cssRules) rule.rules.link(cssRule.cssRules)\n}\n","/**\n * Copyright 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Similar to invariant but only logs a warning if the condition is not met.\n * This can be used to log issues in development environments in critical\n * paths. Removing the logging code for production environments will keep the\n * same logic and follow the same code paths.\n */\n\nvar __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar warning = function() {};\n\nif (__DEV__) {\n  warning = function(condition, format, args) {\n    var len = arguments.length;\n    args = new Array(len > 2 ? len - 2 : 0);\n    for (var key = 2; key < len; key++) {\n      args[key - 2] = arguments[key];\n    }\n    if (format === undefined) {\n      throw new Error(\n        '`warning(condition, format, ...args)` requires a warning ' +\n        'message argument'\n      );\n    }\n\n    if (format.length < 10 || (/^[s\\W]*$/).test(format)) {\n      throw new Error(\n        'The warning format should be able to uniquely identify this ' +\n        'warning. Please, use a more descriptive format than: ' + format\n      );\n    }\n\n    if (!condition) {\n      var argIndex = 0;\n      var message = 'Warning: ' +\n        format.replace(/%s/g, function() {\n          return args[argIndex++];\n        });\n      if (typeof console !== 'undefined') {\n        console.error(message);\n      }\n      try {\n        // This error was thrown as a convenience so that you can use this stack\n        // to find the callsite that caused this warning to fire.\n        throw new Error(message);\n      } catch(x) {}\n    }\n  };\n}\n\nmodule.exports = warning;\n","/* @flow */\n\nconst join = (value, by) => {\n  let result = ''\n  for (let i = 0; i < value.length; i++) {\n    // Remove !important from the value, it will be readded later.\n    if (value[i] === '!important') break\n    if (result) result += by\n    result += value[i]\n  }\n  return result\n}\n\n/**\n * Converts array values to string.\n *\n * `margin: [['5px', '10px']]` > `margin: 5px 10px;`\n * `border: ['1px', '2px']` > `border: 1px, 2px;`\n * `margin: [['5px', '10px'], '!important']` > `margin: 5px 10px !important;`\n * `color: ['red', !important]` > `color: red !important;`\n */\nexport default function toCssValue(value: any, ignoreImportant: boolean = false) {\n  if (!Array.isArray(value)) return value\n\n  let cssValue = ''\n\n  // Support space separated values via `[['5px', '10px']]`.\n  if (Array.isArray(value[0])) {\n    for (let i = 0; i < value.length; i++) {\n      if (value[i] === '!important') break\n      if (cssValue) cssValue += ', '\n      cssValue += join(value[i], ' ')\n    }\n  } else cssValue = join(value, ', ')\n\n  // Add !important, because it was ignored.\n  if (!ignoreImportant && value[value.length - 1] === '!important') {\n    cssValue += ' !important'\n  }\n\n  return cssValue\n}\n","/* @flow */\nimport toCssValue from './toCssValue'\nimport type {ToCssOptions, JssStyle} from '../types'\n\n/**\n * Indent a string.\n * http://jsperf.com/array-join-vs-for\n */\nfunction indentStr(str: string, indent: number): string {\n  let result = ''\n  for (let index = 0; index < indent; index++) result += '  '\n  return result + str\n}\n\n/**\n * Converts a Rule to CSS string.\n */\nexport default function toCss(\n  selector: string,\n  style: JssStyle,\n  options: ToCssOptions = {}\n): string {\n  let result = ''\n\n  if (!style) return result\n\n  let {indent = 0} = options\n  const {fallbacks} = style\n\n  indent++\n\n  // Apply fallbacks first.\n  if (fallbacks) {\n    // Array syntax {fallbacks: [{prop: value}]}\n    if (Array.isArray(fallbacks)) {\n      for (let index = 0; index < fallbacks.length; index++) {\n        const fallback = fallbacks[index]\n        for (const prop in fallback) {\n          const value = fallback[prop]\n          if (value != null) {\n            result += `\\n${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n          }\n        }\n      }\n    } else {\n      // Object syntax {fallbacks: {prop: value}}\n      for (const prop in fallbacks) {\n        const value = fallbacks[prop]\n        if (value != null) {\n          result += `\\n${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n        }\n      }\n    }\n  }\n\n  for (const prop in style) {\n    const value = style[prop]\n    if (value != null && prop !== 'fallbacks') {\n      result += `\\n${indentStr(`${prop}: ${toCssValue(value)};`, indent)}`\n    }\n  }\n\n  // Allow empty style in this case, because properties will be added dynamically.\n  if (!result && !options.allowEmpty) return result\n\n  indent--\n  result = indentStr(`${selector} {${result}\\n`, indent) + indentStr('}', indent)\n\n  return result\n}\n","/* @flow */\nimport warning from 'warning'\nimport toCss from '../utils/toCss'\nimport toCssValue from '../utils/toCssValue'\nimport type {\n  ToCssOptions,\n  RuleOptions,\n  Renderer as RendererInterface,\n  JssStyle,\n  JssValue,\n  BaseRule\n} from '../types'\n\nexport default class StyleRule implements BaseRule {\n  type = 'style'\n\n  key: string\n\n  isProcessed: boolean = false\n\n  style: JssStyle\n\n  selectorText: string\n\n  renderer: RendererInterface\n\n  renderable: ?CSSStyleRule\n\n  options: RuleOptions\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    const {sheet, Renderer, selector} = options\n    this.key = key\n    this.options = options\n    this.style = style\n    if (selector) this.selectorText = selector\n    this.renderer = sheet ? sheet.renderer : new Renderer()\n  }\n\n  /**\n   * Set selector string.\n   * Attention: use this with caution. Most browsers didn't implement\n   * selectorText setter, so this may result in rerendering of entire Style Sheet.\n   */\n  set selector(selector: string): void {\n    if (selector === this.selectorText) return\n\n    this.selectorText = selector\n\n    if (!this.renderable) return\n\n    const hasChanged = this.renderer.setSelector(this.renderable, selector)\n\n    // If selector setter is not implemented, rerender the rule.\n    if (!hasChanged && this.renderable) {\n      const renderable = this.renderer.replaceRule(this.renderable, this)\n      if (renderable) this.renderable = renderable\n    }\n  }\n\n  /**\n   * Get selector string.\n   */\n  get selector(): string {\n    return this.selectorText\n  }\n\n  /**\n   * Get or set a style property.\n   */\n  prop(name: string, value?: JssValue): StyleRule | string {\n    // It's a getter.\n    if (value === undefined) return this.style[name]\n\n    // Don't do anything if the value has not changed.\n    if (this.style[name] === value) return this\n\n    value = this.options.jss.plugins.onChangeValue(value, name, this)\n\n    const isEmpty = value == null || value === false\n    const isDefined = name in this.style\n\n    // Value is empty and wasn't defined before.\n    if (isEmpty && !isDefined) return this\n\n    // We are going to remove this value.\n    const remove = isEmpty && isDefined\n\n    if (remove) delete this.style[name]\n    else this.style[name] = value\n\n    // Renderable is defined if StyleSheet option `link` is true.\n    if (this.renderable) {\n      if (remove) this.renderer.removeProperty(this.renderable, name)\n      else this.renderer.setProperty(this.renderable, name, value)\n      return this\n    }\n\n    const {sheet} = this.options\n    if (sheet && sheet.attached) {\n      warning(false, 'Rule is not linked. Missing sheet option \"link: true\".')\n    }\n    return this\n  }\n\n  /**\n   * Apply rule to an element inline.\n   */\n  applyTo(renderable: HTMLElement): this {\n    const json = this.toJSON()\n    for (const prop in json) this.renderer.setProperty(renderable, prop, json[prop])\n    return this\n  }\n\n  /**\n   * Returns JSON representation of the rule.\n   * Fallbacks are not supported.\n   * Useful for inline styles.\n   */\n  toJSON(): Object {\n    const json = {}\n    for (const prop in this.style) {\n      const value = this.style[prop]\n      if (typeof value !== 'object') json[prop] = value\n      else if (Array.isArray(value)) json[prop] = toCssValue(value)\n    }\n    return json\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    const {sheet} = this.options\n    const link = sheet ? sheet.options.link : false\n    const opts = link ? {...options, allowEmpty: true} : options\n    return toCss(this.selector, this.style, opts)\n  }\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports['default'] = symbolObservablePonyfill;\nfunction symbolObservablePonyfill(root) {\n\tvar result;\n\tvar _Symbol = root.Symbol;\n\n\tif (typeof _Symbol === 'function') {\n\t\tif (_Symbol.observable) {\n\t\t\tresult = _Symbol.observable;\n\t\t} else {\n\t\t\tresult = _Symbol('observable');\n\t\t\t_Symbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _ponyfill = require('./ponyfill.js');\n\nvar _ponyfill2 = _interopRequireDefault(_ponyfill);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar root; /* global window */\n\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = (0, _ponyfill2['default'])(root);\nexports['default'] = result;","module.exports = require('./lib/index');\n","import $$observable from 'symbol-observable'\n\nexport default value => value && value[$$observable] && value === value[$$observable]()\n","import isObservable from './isObservable'\nimport type {JssStyle} from '../types'\n\nconst {isArray} = Array\n\nexport default function cloneStyle(style: JssStyle): JssStyle {\n  // Support empty values in case user ends up with them by accident.\n  if (style == null) return style\n\n  // Support string value for SimpleRule.\n  const typeOfStyle = typeof style\n\n  if (typeOfStyle === 'string' || typeOfStyle === 'number' || typeOfStyle === 'function') {\n    return style\n  }\n\n  // Support array for FontFaceRule.\n  if (isArray(style)) return style.map(cloneStyle)\n\n  // Support Observable styles.  Observables are immutable, so we don't need to\n  // copy them.\n  if (isObservable(style)) return style\n\n  const newStyle = {}\n  for (const name in style) {\n    const value = style[name]\n    if (typeof value === 'object') {\n      newStyle[name] = cloneStyle(value)\n      continue\n    }\n    newStyle[name] = value\n  }\n\n  return newStyle\n}\n","/* @flow */\nimport warning from 'warning'\nimport StyleRule from '../rules/StyleRule'\nimport type {Rule, RuleOptions, JssStyle} from '../types'\nimport cloneStyle from '../utils/cloneStyle'\n\n/**\n * Create a rule instance.\n */\nexport default function createRule(\n  name: string = 'unnamed',\n  decl: JssStyle,\n  options: RuleOptions\n): Rule {\n  const {jss} = options\n  const declCopy = cloneStyle(decl)\n\n  const rule = jss.plugins.onCreateRule(name, declCopy, options)\n  if (rule) return rule\n\n  // It is an at-rule and it has no instance.\n  if (name[0] === '@') {\n    warning(false, '[JSS] Unknown at-rule %s', name)\n  }\n\n  return new StyleRule(name, declCopy, options)\n}\n","const CSS = (global.CSS: any)\n\nconst env = process.env.NODE_ENV\n\nconst escapeRegex = /([[\\].#*$><+~=|^:(),\"'`])/g\n\nexport default str => {\n  // We don't need to escape it in production, because we are not using user's\n  // input for selectors, we are generating a valid selector.\n  if (env === 'production') return str\n\n  if (!CSS || !CSS.escape) {\n    return str.replace(escapeRegex, '\\\\$1')\n  }\n\n  return CSS.escape(str)\n}\n","/* @flow */\nimport createRule from './utils/createRule'\nimport linkRule from './utils/linkRule'\nimport StyleRule from './rules/StyleRule'\nimport type {RuleListOptions, ToCssOptions, Rule, RuleOptions, JssStyle} from './types'\nimport escape from './utils/escape'\n\ntype Update = ((name: string, data?: Object) => void) & ((data?: Object) => void)\n\n/**\n * Contains rules objects and allows adding/removing etc.\n * Is used for e.g. by `StyleSheet` or `ConditionalRule`.\n */\nexport default class RuleList {\n  // Rules registry for access by .get() method.\n  // It contains the same rule registered by name and by selector.\n  map: {[key: string]: Rule} = {}\n\n  // Original styles object.\n  raw: {[key: string]: JssStyle} = {}\n\n  // Used to ensure correct rules order.\n  index: Array<Rule> = []\n\n  options: RuleListOptions\n\n  classes: Object\n\n  constructor(options: RuleListOptions) {\n    this.options = options\n    this.classes = options.classes\n  }\n\n  /**\n   * Create and register rule.\n   *\n   * Will not render after Style Sheet was rendered the first time.\n   */\n  add(name: string, decl: JssStyle, options?: RuleOptions): Rule {\n    const {parent, sheet, jss, Renderer, generateClassName} = this.options\n\n    options = {\n      classes: this.classes,\n      parent,\n      sheet,\n      jss,\n      Renderer,\n      generateClassName,\n      ...options\n    }\n\n    if (!options.selector && this.classes[name]) {\n      options.selector = `.${escape(this.classes[name])}`\n    }\n\n    this.raw[name] = decl\n\n    const rule = createRule(name, decl, options)\n\n    let className\n\n    if (!options.selector && rule instanceof StyleRule) {\n      className = generateClassName(rule, sheet)\n      rule.selector = `.${escape(className)}`\n    }\n\n    this.register(rule, className)\n\n    const index = options.index === undefined ? this.index.length : options.index\n    this.index.splice(index, 0, rule)\n\n    return rule\n  }\n\n  /**\n   * Get a rule.\n   */\n  get(name: string): Rule {\n    return this.map[name]\n  }\n\n  /**\n   * Delete a rule.\n   */\n  remove(rule: Rule): void {\n    this.unregister(rule)\n    this.index.splice(this.indexOf(rule), 1)\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.index.indexOf(rule)\n  }\n\n  /**\n   * Run `onProcessRule()` plugins on every rule.\n   */\n  process(): void {\n    const {plugins} = this.options.jss\n    // We need to clone array because if we modify the index somewhere else during a loop\n    // we end up with very hard-to-track-down side effects.\n    this.index.slice(0).forEach(plugins.onProcessRule, plugins)\n  }\n\n  /**\n   * Register a rule in `.map` and `.classes` maps.\n   */\n  register(rule: Rule, className?: string): void {\n    this.map[rule.key] = rule\n    if (rule instanceof StyleRule) {\n      this.map[rule.selector] = rule\n      if (className) this.classes[rule.key] = className\n    }\n  }\n\n  /**\n   * Unregister a rule.\n   */\n  unregister(rule: Rule): void {\n    delete this.map[rule.key]\n    if (rule instanceof StyleRule) {\n      delete this.map[rule.selector]\n      delete this.classes[rule.key]\n    }\n  }\n\n  /**\n   * Update the function values with a new data.\n   */\n  update: Update = (name, data) => {\n    const {jss: {plugins}, sheet} = this.options\n    if (typeof name === 'string') {\n      plugins.onUpdate(data, this.get(name), sheet)\n    } else {\n      for (let index = 0; index < this.index.length; index++) {\n        plugins.onUpdate(name, this.index[index], sheet)\n      }\n    }\n  }\n\n  /**\n   * Link renderable rules with CSSRuleList.\n   */\n  link(cssRules: CSSRuleList): void {\n    const map = this.options.sheet.renderer.getUnescapedKeysMap(this.index)\n\n    for (let i = 0; i < cssRules.length; i++) {\n      const cssRule = cssRules[i]\n      let key = this.options.sheet.renderer.getKey(cssRule)\n      if (map[key]) key = map[key]\n      const rule = this.map[key]\n      if (rule) linkRule(rule, cssRule)\n    }\n  }\n\n  /**\n   * Convert rules to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    let str = ''\n    const {sheet} = this.options\n    const link = sheet ? sheet.options.link : false\n\n    for (let index = 0; index < this.index.length; index++) {\n      const rule = this.index[index]\n      const css = rule.toString(options)\n\n      // No need to render an empty rule.\n      if (!css && !link) continue\n\n      if (str) str += '\\n'\n      str += css\n    }\n\n    return str\n  }\n}\n","/* @flow */\nimport linkRule from './utils/linkRule'\nimport RuleList from './RuleList'\nimport type {\n  InternalStyleSheetOptions,\n  Rule,\n  ToCssOptions,\n  RuleOptions,\n  StyleSheetOptions,\n  JssStyle\n} from './types'\n\n/* eslint-disable-next-line no-use-before-define */\ntype Update = ((name: string, data?: Object) => StyleSheet) & ((data?: Object) => StyleSheet)\n\nexport default class StyleSheet {\n  options: InternalStyleSheetOptions\n\n  linked: boolean\n\n  deployed: boolean\n\n  attached: boolean\n\n  rules: RuleList\n\n  renderer: Object\n\n  classes: Object\n\n  queue: ?Array<Rule>\n\n  constructor(styles: Object, options: StyleSheetOptions) {\n    this.attached = false\n    this.deployed = false\n    this.linked = false\n    this.classes = {}\n    this.options = {\n      ...options,\n      sheet: this,\n      parent: this,\n      classes: this.classes\n    }\n    this.renderer = new options.Renderer(this)\n    this.rules = new RuleList(this.options)\n\n    for (const name in styles) {\n      this.rules.add(name, styles[name])\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Attach renderable to the render tree.\n   */\n  attach(): this {\n    if (this.attached) return this\n    if (!this.deployed) this.deploy()\n    this.renderer.attach()\n    if (!this.linked && this.options.link) this.link()\n    this.attached = true\n    return this\n  }\n\n  /**\n   * Remove renderable from render tree.\n   */\n  detach(): this {\n    if (!this.attached) return this\n    this.renderer.detach()\n    this.attached = false\n    return this\n  }\n\n  /**\n   * Add a rule to the current stylesheet.\n   * Will insert a rule also after the stylesheet has been rendered first time.\n   */\n  addRule(name: string, decl: JssStyle, options?: RuleOptions): Rule {\n    const {queue} = this\n\n    // Plugins can create rules.\n    // In order to preserve the right order, we need to queue all `.addRule` calls,\n    // which happen after the first `rules.add()` call.\n    if (this.attached && !queue) this.queue = []\n\n    const rule = this.rules.add(name, decl, options)\n    this.options.jss.plugins.onProcessRule(rule)\n\n    if (this.attached) {\n      if (!this.deployed) return rule\n      // Don't insert rule directly if there is no stringified version yet.\n      // It will be inserted all together when .attach is called.\n      if (queue) queue.push(rule)\n      else {\n        this.insertRule(rule)\n        if (this.queue) {\n          this.queue.forEach(this.insertRule, this)\n          this.queue = undefined\n        }\n      }\n      return rule\n    }\n\n    // We can't add rules to a detached style node.\n    // We will redeploy the sheet once user will attach it.\n    this.deployed = false\n\n    return rule\n  }\n\n  /**\n   * Insert rule into the StyleSheet\n   */\n  insertRule(rule: Rule) {\n    const renderable = this.renderer.insertRule(rule)\n    if (renderable && this.options.link) linkRule(rule, renderable)\n  }\n\n  /**\n   * Create and add rules.\n   * Will render also after Style Sheet was rendered the first time.\n   */\n  addRules(styles: Object, options?: RuleOptions): Array<Rule> {\n    const added = []\n    for (const name in styles) {\n      added.push(this.addRule(name, styles[name], options))\n    }\n    return added\n  }\n\n  /**\n   * Get a rule by name.\n   */\n  getRule(name: string): Rule {\n    return this.rules.get(name)\n  }\n\n  /**\n   * Delete a rule by name.\n   * Returns `true`: if rule has been deleted from the DOM.\n   */\n  deleteRule(name: string): boolean {\n    const rule = this.rules.get(name)\n\n    if (!rule) return false\n\n    this.rules.remove(rule)\n\n    if (this.attached && rule.renderable) {\n      return this.renderer.deleteRule(rule.renderable)\n    }\n\n    return true\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.rules.indexOf(rule)\n  }\n\n  /**\n   * Deploy pure CSS string to a renderable.\n   */\n  deploy(): this {\n    this.renderer.deploy()\n    this.deployed = true\n    return this\n  }\n\n  /**\n   * Link renderable CSS rules from sheet with their corresponding models.\n   */\n  link(): this {\n    const cssRules = this.renderer.getRules()\n\n    // Is undefined when VirtualRenderer is used.\n    if (cssRules) this.rules.link(cssRules)\n    this.linked = true\n    return this\n  }\n\n  /**\n   * Update the function values with a new data.\n   */\n  update: Update = (name, data) => {\n    if (typeof name === 'string') {\n      this.rules.update(name, data)\n    } else {\n      this.rules.update(name)\n    }\n    return this\n  }\n\n  /**\n   * Convert rules to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return this.rules.toString(options)\n  }\n}\n","/* @flow */\nimport warning from 'warning'\nimport type StyleSheet from './StyleSheet'\nimport type {Plugin, Rule, RuleOptions, JssStyle} from './types'\n\nexport default class PluginsRegistry {\n  hooks: {[key: string]: Array<Function>} = {\n    onCreateRule: [],\n    onProcessRule: [],\n    onProcessStyle: [],\n    onProcessSheet: [],\n    onChangeValue: [],\n    onUpdate: []\n  }\n\n  /**\n   * Call `onCreateRule` hooks and return an object if returned by a hook.\n   */\n  onCreateRule(\n    name?: string,\n    decl: JssStyle,\n    options: RuleOptions\n  ): Rule | null {\n    for (let i = 0; i < this.hooks.onCreateRule.length; i++) {\n      const rule = this.hooks.onCreateRule[i](name, decl, options)\n      if (rule) return rule\n    }\n    return null\n  }\n\n  /**\n   * Call `onProcessRule` hooks.\n   */\n  onProcessRule(rule: Rule): void {\n    if (rule.isProcessed) return\n    const {sheet} = rule.options\n    for (let i = 0; i < this.hooks.onProcessRule.length; i++) {\n      this.hooks.onProcessRule[i](rule, sheet)\n    }\n\n    // $FlowFixMe\n    if (rule.style) this.onProcessStyle(rule.style, rule, sheet)\n\n    rule.isProcessed = true\n  }\n\n  /**\n   * Call `onProcessStyle` hooks.\n   */\n  onProcessStyle(style: JssStyle, rule: Rule, sheet?: StyleSheet): void {\n    let nextStyle = style\n\n    for (let i = 0; i < this.hooks.onProcessStyle.length; i++) {\n      nextStyle = this.hooks.onProcessStyle[i](nextStyle, rule, sheet)\n      // $FlowFixMe\n      rule.style = nextStyle\n    }\n  }\n\n  /**\n   * Call `onProcessSheet` hooks.\n   */\n  onProcessSheet(sheet: StyleSheet): void {\n    for (let i = 0; i < this.hooks.onProcessSheet.length; i++) {\n      this.hooks.onProcessSheet[i](sheet)\n    }\n  }\n\n  /**\n   * Call `onUpdate` hooks.\n   */\n  onUpdate(data: Object | void, rule: Rule, sheet: StyleSheet): void {\n    for (let i = 0; i < this.hooks.onUpdate.length; i++) {\n      this.hooks.onUpdate[i](data, rule, sheet)\n    }\n  }\n\n  /**\n   * Call `onChangeValue` hooks.\n   */\n  onChangeValue(value: string, prop: string, rule: Rule): string {\n    let processedValue = value\n    for (let i = 0; i < this.hooks.onChangeValue.length; i++) {\n      processedValue = this.hooks.onChangeValue[i](processedValue, prop, rule)\n    }\n    return processedValue\n  }\n\n  /**\n   * Register a plugin.\n   * If function is passed, it is a shortcut for `{onProcessRule}`.\n   */\n  use(plugin: Plugin): void {\n    for (const name in plugin) {\n      if (this.hooks[name]) this.hooks[name].push(plugin[name])\n      else warning(false, '[JSS] Unknown hook \"%s\".', name)\n    }\n  }\n}\n","/* @flow */\nimport type {RuleOptions, ToCssOptions, BaseRule} from '../types'\n\nexport default class SimpleRule implements BaseRule {\n  type = 'simple'\n\n  key: string\n\n  value: string\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, value: string, options: RuleOptions) {\n    this.key = key\n    this.value = value\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  // eslint-disable-next-line no-unused-vars\n  toString(options?: ToCssOptions): string {\n    if (Array.isArray(this.value)) {\n      let str = ''\n      for (let index = 0; index < this.value.length; index++) {\n        str += `${this.key} ${this.value[index]};`\n        if (this.value[index + 1]) str += '\\n'\n      }\n      return str\n    }\n\n    return `${this.key} ${this.value};`\n  }\n}\n","/* @flow */\nimport RuleList from '../RuleList'\nimport type {RuleOptions, ToCssOptions, BaseRule} from '../types'\n\n/**\n * Rule for @keyframes\n */\nexport default class KeyframesRule implements BaseRule {\n  type = 'keyframes'\n\n  key: string\n\n  rules: RuleList\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, frames: Object, options: RuleOptions) {\n    this.key = key\n    this.options = options\n    this.rules = new RuleList({...options, parent: this})\n\n    for (const name in frames) {\n      this.rules.add(name, frames[name], {\n        ...this.options,\n        parent: this,\n        selector: name\n      })\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions = {indent: 1}): string {\n    let inner = this.rules.toString(options)\n    if (inner) inner += '\\n'\n    return `${this.key} {\\n${inner}}`\n  }\n}\n","/* @flow */\nimport RuleList from '../RuleList'\nimport type {Rule, RuleOptions, ToCssOptions, JssStyle, BaseRule} from '../types'\n\n/**\n * Conditional rule for @media, @supports\n */\nexport default class ConditionalRule implements BaseRule {\n  type = 'conditional'\n\n  key: string\n\n  rules: RuleList\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, styles: Object, options: RuleOptions) {\n    this.key = key\n    this.options = options\n    this.rules = new RuleList({...options, parent: this})\n\n    for (const name in styles) {\n      this.rules.add(name, styles[name])\n    }\n\n    this.rules.process()\n  }\n\n  /**\n   * Get a rule.\n   */\n  getRule(name: string): Rule {\n    return this.rules.get(name)\n  }\n\n  /**\n   * Get index of a rule.\n   */\n  indexOf(rule: Rule): number {\n    return this.rules.indexOf(rule)\n  }\n\n  /**\n   * Create and register rule, run plugins.\n   */\n  addRule(name: string, style: JssStyle, options?: RuleOptions): Rule {\n    const rule = this.rules.add(name, style, options)\n    this.options.jss.plugins.onProcessRule(rule)\n    return rule\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions = {indent: 1}): string {\n    const inner = this.rules.toString(options)\n    return inner ? `${this.key} {\\n${inner}\\n}` : ''\n  }\n}\n","/* @flow */\nimport toCss from '../utils/toCss'\nimport type {RuleOptions, JssStyle, ToCssOptions, BaseRule} from '../types'\n\nexport default class FontFaceRule implements BaseRule {\n  type = 'font-face'\n\n  key: string\n\n  style: JssStyle\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    this.key = key\n    this.style = style\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    if (Array.isArray(this.style)) {\n      let str = ''\n      for (let index = 0; index < this.style.length; index++) {\n        str += toCss(this.key, this.style[index])\n        if (this.style[index + 1]) str += '\\n'\n      }\n      return str\n    }\n\n    return toCss(this.key, this.style, options)\n  }\n}\n","/* @flow */\nimport toCss from '../utils/toCss'\nimport type {RuleOptions, JssStyle, ToCssOptions, BaseRule} from '../types'\n\nexport default class ViewportRule implements BaseRule {\n  type = 'viewport'\n\n  key: string\n\n  style: JssStyle\n\n  options: RuleOptions\n\n  isProcessed: boolean = false\n\n  renderable: ?CSSStyleRule\n\n  constructor(key: string, style: JssStyle, options: RuleOptions) {\n    this.key = key\n    this.style = style\n    this.options = options\n  }\n\n  /**\n   * Generates a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return toCss(this.key, this.style, options)\n  }\n}\n","/* @flow */\nimport SimpleRule from '../rules/SimpleRule'\nimport KeyframesRule from '../rules/KeyframesRule'\nimport ConditionalRule from '../rules/ConditionalRule'\nimport FontFaceRule from '../rules/FontFaceRule'\nimport ViewportRule from '../rules/ViewportRule'\nimport type {Plugin, RuleOptions, Rule, JssStyle} from '../types'\n\nconst classes = {\n  '@charset': SimpleRule,\n  '@import': SimpleRule,\n  '@namespace': SimpleRule,\n  '@keyframes': KeyframesRule,\n  '@media': ConditionalRule,\n  '@supports': ConditionalRule,\n  '@font-face': FontFaceRule,\n  '@viewport': ViewportRule,\n  '@-ms-viewport': ViewportRule\n}\n\n/**\n * Generate plugins which will register all rules.\n */\nconst plugins: $ReadOnlyArray<Plugin> = Object.keys(classes).map((key: string) => {\n  // https://jsperf.com/indexof-vs-substr-vs-regex-at-the-beginning-3\n  const re = new RegExp(`^${key}`)\n  const RuleClass = classes[key]\n  const onCreateRule = (name: string, decl: JssStyle, options: RuleOptions): Rule | null =>\n    re.test(name) ? new RuleClass(name, decl, options) : null\n  return {onCreateRule}\n})\n\nexport default plugins\n","/* @flow */\nimport StyleRule from '../rules/StyleRule'\nimport createRule from '../utils/createRule'\nimport isObservable from '../utils/isObservable'\nimport type {Observable, Rule, RuleOptions, JssStyle} from '../types'\n\nexport default {\n  onCreateRule(name: string, decl: JssStyle, options: RuleOptions): Rule | null {\n    if (!isObservable(decl)) return null\n\n    // Cast `decl` to `Observable`, since it passed the type guard.\n    const style$ = (decl: Observable<{[string]: string | number}>)\n\n    const rule = ((createRule(name, {}, options): any): StyleRule)\n\n    // TODO\n    // Call `stream.subscribe()` returns a subscription, which should be explicitly\n    // unsubscribed from when we know this sheet is no longer needed.\n    style$.subscribe((style: JssStyle) => {\n      for (const prop in style) {\n        rule.prop(prop, style[prop])\n      }\n    })\n\n    return rule\n  },\n\n  onProcessRule(rule: Rule) {\n    if (!(rule instanceof StyleRule)) return\n    const styleRule = ((rule: any): StyleRule)\n    const {style} = styleRule\n    for (const prop in style) {\n      const value = style[prop]\n      if (!isObservable(value)) continue\n      delete style[prop]\n      value.subscribe({\n        next: nextValue => {\n          styleRule.prop(prop, nextValue)\n        }\n      })\n    }\n  }\n}\n","/* @flow */\nimport RuleList from '../RuleList'\nimport StyleRule from '../rules/StyleRule'\nimport type {Rule, JssStyle, RuleOptions} from '../types'\nimport createRule from '../utils/createRule'\n\n// A symbol replacement.\nlet now = Date.now()\nconst fnValuesNs = `fnValues${now}`\nconst fnStyleNs = `fnStyle${++now}`\n\ntype StyleRuleWithRuleFunction = StyleRule & {[key: string]: Function}\n\ntype StyleRuleWithFunctionValues = StyleRule & {\n  [key: string]: {\n    [key: string]: Function\n  }\n}\n\nexport default {\n  onCreateRule(name: string, decl: JssStyle, options: RuleOptions): Rule | null {\n    if (typeof decl !== 'function') return null\n    const rule = ((createRule(name, {}, options): any): StyleRuleWithRuleFunction)\n    rule[fnStyleNs] = decl\n    return rule\n  },\n\n  onProcessStyle(style: JssStyle, rule: Rule): JssStyle {\n    const fn = {}\n    for (const prop in style) {\n      const value = style[prop]\n      if (typeof value !== 'function') continue\n      delete style[prop]\n      fn[prop] = value\n    }\n    rule = ((rule: any): StyleRuleWithFunctionValues)\n    rule[fnValuesNs] = fn\n    return style\n  },\n\n  onUpdate(data: Object, rule: Rule) {\n    // It is a rules container like for e.g. ConditionalRule.\n    if (rule.rules instanceof RuleList) {\n      rule.rules.update(data)\n      return\n    }\n    if (!(rule instanceof StyleRule)) return\n\n    rule = ((rule: any): StyleRuleWithFunctionValues)\n\n    // If we have a fn values map, it is a rule with function values.\n    if (rule[fnValuesNs]) {\n      for (const prop in rule[fnValuesNs]) {\n        rule.prop(prop, rule[fnValuesNs][prop](data))\n      }\n    }\n\n    rule = ((rule: any): StyleRuleWithRuleFunction)\n\n    const fnStyle = rule[fnStyleNs]\n\n    // If we have a style function, the entire rule is dynamic and style object\n    // will be returned from that function.\n    if (fnStyle) {\n      const style = fnStyle(data)\n      for (const prop in style) {\n        rule.prop(prop, style[prop])\n      }\n    }\n  }\n}\n","/* @flow */\nimport type {ToCssOptions} from './types'\nimport type StyleSheet from './StyleSheet'\n\n/**\n * Sheets registry to access them all at one place.\n */\nexport default class SheetsRegistry {\n  registry: Array<StyleSheet> = []\n\n  /**\n   * Current highest index number.\n   */\n  get index(): number {\n    return this.registry.length === 0\n      ? 0\n      : this.registry[this.registry.length - 1].options.index\n  }\n\n  /**\n   * Register a Style Sheet.\n   */\n  add(sheet: StyleSheet): void {\n    const {registry} = this\n    const {index} = sheet.options\n\n    if (registry.indexOf(sheet) !== -1) return\n\n    if (registry.length === 0 || index >= this.index) {\n      registry.push(sheet)\n      return\n    }\n\n    // Find a position.\n    for (let i = 0; i < registry.length; i++) {\n      if (registry[i].options.index > index) {\n        registry.splice(i, 0, sheet)\n        return\n      }\n    }\n  }\n\n  /**\n   * Reset the registry.\n   */\n  reset(): void {\n    this.registry = []\n  }\n\n  /**\n   * Remove a Style Sheet.\n   */\n  remove(sheet: StyleSheet): void {\n    const index = this.registry.indexOf(sheet)\n    this.registry.splice(index, 1)\n  }\n\n  /**\n   * Convert all attached sheets to a CSS string.\n   */\n  toString(options?: ToCssOptions): string {\n    return this.registry\n      .filter(sheet => sheet.attached)\n      .map(sheet => sheet.toString(options))\n      .join('\\n')\n  }\n}\n","/* @flow */\nimport SheetsRegistry from './SheetsRegistry'\n\n/**\n * This is a global sheets registry. Only DomRenderer will add sheets to it.\n * On the server one should use an own SheetsRegistry instance and add the\n * sheets to it, because you need to make sure to create a new registry for\n * each request in order to not leak sheets across requests.\n */\nexport default new SheetsRegistry()\n","const ns = '2f1acc6c3a606b082e5eef5e54414ffb'\nif (global[ns] == null) global[ns] = 0\n\n// Bundle may contain multiple JSS versions at the same time. In order to identify\n// the current version with just one short number and use it for classes generation\n// we use a counter. Also it is more accurate, because user can manually reevaluate\n// the module.\nexport default global[ns]++\n","/* @flow */\nimport warning from 'warning'\nimport type {Rule, generateClassName} from '../types'\nimport StyleSheet from '../StyleSheet'\nimport moduleId from './moduleId'\n\nconst maxRules = 1e10\n\nconst env = process.env.NODE_ENV\n\n/**\n * Returns a function which generates unique class names based on counters.\n * When new generator function is created, rule counter is reseted.\n * We need to reset the rule counter for SSR for each request.\n */\nexport default (): generateClassName => {\n  let ruleCounter = 0\n  const defaultPrefix = env === 'production' ? 'c' : ''\n\n  return (rule: Rule, sheet?: StyleSheet): string => {\n    ruleCounter += 1\n\n    if (ruleCounter > maxRules) {\n      warning(false, '[JSS] You might have a memory leak. Rule counter is at %s.', ruleCounter)\n    }\n\n    let prefix = defaultPrefix\n    let jssId = ''\n\n    if (sheet) {\n      prefix = sheet.options.classNamePrefix || defaultPrefix\n      if (sheet.options.jss.id != null) jssId += sheet.options.jss.id\n    }\n\n    if (env === 'production') {\n      return `${prefix}${moduleId}${jssId}${ruleCounter}`\n    }\n\n    return `${prefix + rule.key}-${moduleId}${jssId && `-${jssId}`}-${ruleCounter}`\n  }\n}\n","/* @flow */\nimport warning from 'warning'\nimport sheets from '../sheets'\nimport type StyleSheet from '../StyleSheet'\nimport StyleRule from '../rules/StyleRule'\nimport type {Rule, JssValue, InsertionPoint} from '../types'\nimport toCssValue from '../utils/toCssValue'\n\ntype PriorityOptions = {\n  index: number,\n  insertionPoint?: InsertionPoint\n}\n\n/**\n * Cache the value from the first time a function is called.\n */\nconst memoize = <Value>(fn: () => Value): (() => Value) => {\n  let value\n  return () => {\n    if (!value) value = fn()\n    return value\n  }\n}\n\n/**\n * Get a style property value.\n */\nfunction getPropertyValue(cssRule: HTMLElement | CSSStyleRule, prop: string): string {\n  try {\n    return cssRule.style.getPropertyValue(prop)\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return ''\n  }\n}\n\n/**\n * Set a style property.\n */\nfunction setProperty(cssRule: HTMLElement | CSSStyleRule, prop: string, value: JssValue): boolean {\n  try {\n    let cssValue = ((value: any): string)\n\n    if (Array.isArray(value)) {\n      cssValue = toCssValue(value, true)\n\n      if (value[value.length - 1] === '!important') {\n        cssRule.style.setProperty(prop, cssValue, 'important')\n        return true\n      }\n    }\n\n    cssRule.style.setProperty(prop, cssValue)\n  } catch (err) {\n    // IE may throw if property is unknown.\n    return false\n  }\n  return true\n}\n\n/**\n * Remove a style property.\n */\nfunction removeProperty(cssRule: HTMLElement | CSSStyleRule, prop: string) {\n  try {\n    cssRule.style.removeProperty(prop)\n  } catch (err) {\n    warning(\n      false,\n      '[JSS] DOMException \"%s\" was thrown. Tried to remove property \"%s\".',\n      err.message,\n      prop\n    )\n  }\n}\n\nconst CSSRuleTypes = {\n  STYLE_RULE: 1,\n  KEYFRAMES_RULE: 7\n}\n\n/**\n * Get the CSS Rule key.\n */\n\nconst getKey = (() => {\n  const extractKey = (cssText: string, from: number = 0) =>\n    cssText.substr(from, cssText.indexOf('{') - 1)\n\n  return (cssRule: CSSOMRule): string => {\n    if (cssRule.type === CSSRuleTypes.STYLE_RULE) return cssRule.selectorText\n    if (cssRule.type === CSSRuleTypes.KEYFRAMES_RULE) {\n      const {name} = cssRule\n      if (name) return `@keyframes ${name}`\n\n      // There is no rule.name in the following browsers:\n      // - IE 9\n      // - Safari 7.1.8\n      // - Mobile Safari 9.0.0\n      const {cssText} = cssRule\n      return `@${extractKey(cssText, cssText.indexOf('keyframes'))}`\n    }\n\n    // Conditionals.\n    return extractKey(cssRule.cssText)\n  }\n})()\n\n/**\n * Set the selector.\n */\nfunction setSelector(cssRule: CSSStyleRule, selectorText: string): boolean {\n  cssRule.selectorText = selectorText\n\n  // Return false if setter was not successful.\n  // Currently works in chrome only.\n  return cssRule.selectorText === selectorText\n}\n\n/**\n * Gets the `head` element upon the first call and caches it.\n */\nconst getHead = memoize(\n  (): HTMLElement => document.head || document.getElementsByTagName('head')[0]\n)\n\n/**\n * Gets a map of rule keys, where the property is an unescaped key and value\n * is a potentially escaped one.\n * It is used to identify CSS rules and the corresponding JSS rules. As an identifier\n * for CSSStyleRule we normally use `selectorText`. Though if original selector text\n * contains escaped code points e.g. `:not(#\\\\20)`, CSSOM will compile it to `:not(# )`\n * and so CSS rule's `selectorText` won't match JSS rule selector.\n *\n * https://www.w3.org/International/questions/qa-escapes#cssescapes\n */\nconst getUnescapedKeysMap = (() => {\n  let style\n  let isAttached = false\n\n  return (rules: Array<Rule>): Object => {\n    const map = {}\n    // https://github.com/facebook/flow/issues/2696\n    if (!style) style = (document.createElement('style'): any)\n    for (let i = 0; i < rules.length; i++) {\n      const rule = rules[i]\n      if (!(rule instanceof StyleRule)) continue\n      const {selector} = rule\n      // Only unescape selector over CSSOM if it contains a back slash.\n      if (selector && selector.indexOf('\\\\') !== -1) {\n        // Lazilly attach when needed.\n        if (!isAttached) {\n          getHead().appendChild(style)\n          isAttached = true\n        }\n        style.textContent = `${selector} {}`\n        const {sheet} = style\n        if (sheet) {\n          const {cssRules} = sheet\n          if (cssRules) map[cssRules[0].selectorText] = rule.key\n        }\n      }\n    }\n    if (isAttached) {\n      getHead().removeChild(style)\n      isAttached = false\n    }\n    return map\n  }\n})()\n\n/**\n * Find attached sheet with an index higher than the passed one.\n */\nfunction findHigherSheet(registry: Array<StyleSheet>, options: PriorityOptions): StyleSheet | null {\n  for (let i = 0; i < registry.length; i++) {\n    const sheet = registry[i]\n    if (\n      sheet.attached &&\n      sheet.options.index > options.index &&\n      sheet.options.insertionPoint === options.insertionPoint\n    ) {\n      return sheet\n    }\n  }\n  return null\n}\n\n/**\n * Find attached sheet with the highest index.\n */\nfunction findHighestSheet(\n  registry: Array<StyleSheet>,\n  options: PriorityOptions\n): StyleSheet | null {\n  for (let i = registry.length - 1; i >= 0; i--) {\n    const sheet = registry[i]\n    if (sheet.attached && sheet.options.insertionPoint === options.insertionPoint) {\n      return sheet\n    }\n  }\n  return null\n}\n\n/**\n * Find a comment with \"jss\" inside.\n */\nfunction findCommentNode(text: string): Node | null {\n  const head = getHead()\n  for (let i = 0; i < head.childNodes.length; i++) {\n    const node = head.childNodes[i]\n    if (node.nodeType === 8 && node.nodeValue.trim() === text) {\n      return node\n    }\n  }\n  return null\n}\n\n/**\n * Find a node before which we can insert the sheet.\n */\nfunction findPrevNode(options: PriorityOptions): ?Node | null {\n  const {registry} = sheets\n\n  if (registry.length > 0) {\n    // Try to insert before the next higher sheet.\n    let sheet = findHigherSheet(registry, options)\n    if (sheet) return sheet.renderer.element\n\n    // Otherwise insert after the last attached.\n    sheet = findHighestSheet(registry, options)\n    if (sheet) return sheet.renderer.element.nextElementSibling\n  }\n\n  // Try to find a comment placeholder if registry is empty.\n  const {insertionPoint} = options\n  if (insertionPoint && typeof insertionPoint === 'string') {\n    const comment = findCommentNode(insertionPoint)\n    if (comment) return comment.nextSibling\n    // If user specifies an insertion point and it can't be found in the document -\n    // bad specificity issues may appear.\n    warning(insertionPoint === 'jss', '[JSS] Insertion point \"%s\" not found.', insertionPoint)\n  }\n\n  return null\n}\n\n/**\n * Insert style element into the DOM.\n */\nfunction insertStyle(style: HTMLElement, options: PriorityOptions) {\n  const {insertionPoint} = options\n  const prevNode = findPrevNode(options)\n\n  if (prevNode) {\n    const {parentNode} = prevNode\n    if (parentNode) parentNode.insertBefore(style, prevNode)\n    return\n  }\n\n  // Works with iframes and any node types.\n  if (insertionPoint && typeof insertionPoint.nodeType === 'number') {\n    // https://stackoverflow.com/questions/41328728/force-casting-in-flow\n    const insertionPointElement: HTMLElement = (insertionPoint: any)\n    const {parentNode} = insertionPointElement\n    if (parentNode) parentNode.insertBefore(style, insertionPointElement.nextSibling)\n    else warning(false, '[JSS] Insertion point is not in the DOM.')\n    return\n  }\n\n  getHead().insertBefore(style, prevNode)\n}\n\n/**\n * Read jss nonce setting from the page if the user has set it.\n */\nconst getNonce = memoize((): ?string => {\n  const node = document.querySelector('meta[property=\"csp-nonce\"]')\n  return node ? node.getAttribute('content') : null\n})\n\nexport default class DomRenderer {\n  getPropertyValue = getPropertyValue\n\n  setProperty = setProperty\n\n  removeProperty = removeProperty\n\n  setSelector = setSelector\n\n  getKey = getKey\n\n  getUnescapedKeysMap = getUnescapedKeysMap\n\n  // HTMLStyleElement needs fixing https://github.com/facebook/flow/issues/2696\n  element: any\n\n  sheet: ?StyleSheet\n\n  hasInsertedRules: boolean = false\n\n  constructor(sheet?: StyleSheet) {\n    // There is no sheet when the renderer is used from a standalone StyleRule.\n    if (sheet) sheets.add(sheet)\n\n    this.sheet = sheet\n    const {media, meta, element} = this.sheet ? this.sheet.options : {}\n    this.element = element || document.createElement('style')\n    this.element.type = 'text/css'\n    this.element.setAttribute('data-jss', '')\n    if (media) this.element.setAttribute('media', media)\n    if (meta) this.element.setAttribute('data-meta', meta)\n    const nonce = getNonce()\n    if (nonce) this.element.setAttribute('nonce', nonce)\n  }\n\n  /**\n   * Insert style element into render tree.\n   */\n  attach(): void {\n    // In the case the element node is external and it is already in the DOM.\n    if (this.element.parentNode || !this.sheet) return\n\n    // When rules are inserted using `insertRule` API, after `sheet.detach().attach()`\n    // browsers remove those rules.\n    // TODO figure out if its a bug and if it is known.\n    // Workaround is to redeploy the sheet before attaching as a string.\n    if (this.hasInsertedRules) {\n      this.deploy()\n      this.hasInsertedRules = false\n    }\n\n    insertStyle(this.element, this.sheet.options)\n  }\n\n  /**\n   * Remove style element from render tree.\n   */\n  detach(): void {\n    this.element.parentNode.removeChild(this.element)\n  }\n\n  /**\n   * Inject CSS string into element.\n   */\n  deploy(): void {\n    if (!this.sheet) return\n    this.element.textContent = `\\n${this.sheet.toString()}\\n`\n  }\n\n  /**\n   * Insert a rule into element.\n   */\n  insertRule(rule: Rule, index?: number): false | CSSStyleRule {\n    const {sheet} = this.element\n    const {cssRules} = sheet\n    const str = rule.toString()\n    if (!index) index = cssRules.length\n\n    if (!str) return false\n\n    try {\n      sheet.insertRule(str, index)\n    } catch (err) {\n      warning(false, '[JSS] Can not insert an unsupported rule \\n\\r%s', rule)\n      return false\n    }\n    this.hasInsertedRules = true\n\n    return cssRules[index]\n  }\n\n  /**\n   * Delete a rule.\n   */\n  deleteRule(cssRule: CSSStyleRule): boolean {\n    const {sheet} = this.element\n    const index = this.indexOf(cssRule)\n    if (index === -1) return false\n    sheet.deleteRule(index)\n    return true\n  }\n\n  /**\n   * Get index of a CSS Rule.\n   */\n  indexOf(cssRule: CSSStyleRule): number {\n    const {cssRules} = this.element.sheet\n    for (let index = 0; index < cssRules.length; index++) {\n      if (cssRule === cssRules[index]) return index\n    }\n    return -1\n  }\n\n  /**\n   * Generate a new CSS rule and replace the existing one.\n   */\n  replaceRule(cssRule: CSSStyleRule, rule: Rule): false | CSSStyleRule {\n    const index = this.indexOf(cssRule)\n    const newCssRule = this.insertRule(rule, index)\n    this.element.sheet.deleteRule(index)\n    return newCssRule\n  }\n\n  /**\n   * Get all rules elements.\n   */\n  getRules(): CSSRuleList {\n    return this.element.sheet.cssRules\n  }\n}\n","/* @flow */\n/* eslint-disable class-methods-use-this */\n\n/**\n * Rendering backend to do nothing in nodejs.\n */\nexport default class VirtualRenderer {\n  setProperty() {\n    return true\n  }\n  getPropertyValue() {\n    return ''\n  }\n  removeProperty() {}\n  setSelector() {\n    return true\n  }\n  getKey() {\n    return ''\n  }\n  attach() {}\n  detach() {}\n  deploy() {}\n  insertRule() {\n    return false\n  }\n  deleteRule() {\n    return true\n  }\n  replaceRule() {\n    return false\n  }\n  getRules() {}\n  indexOf() {\n    return -1\n  }\n}\n","/* @flow */\nimport isInBrowser from 'is-in-browser'\nimport StyleSheet from './StyleSheet'\nimport PluginsRegistry from './PluginsRegistry'\nimport rulesPlugins from './plugins/rules'\nimport observablesPlugin from './plugins/observables'\nimport functionsPlugin from './plugins/functions'\nimport sheets from './sheets'\nimport StyleRule from './rules/StyleRule'\nimport createGenerateClassNameDefault from './utils/createGenerateClassName'\nimport createRule from './utils/createRule'\nimport DomRenderer from './renderers/DomRenderer'\nimport VirtualRenderer from './renderers/VirtualRenderer'\nimport type {\n  Rule,\n  RuleFactoryOptions,\n  RuleOptions,\n  StyleSheetFactoryOptions,\n  Plugin,\n  JssOptions,\n  InternalJssOptions,\n  JssStyle,\n  generateClassName\n} from './types'\n\ndeclare var __VERSION__: string\n\nconst defaultPlugins = rulesPlugins.concat([observablesPlugin, functionsPlugin])\n\nlet instanceCounter = 0\n\nexport default class Jss {\n  id = instanceCounter++\n\n  version = __VERSION__\n\n  plugins = new PluginsRegistry()\n\n  options: InternalJssOptions = {\n    createGenerateClassName: createGenerateClassNameDefault,\n    Renderer: isInBrowser ? DomRenderer : VirtualRenderer,\n    plugins: []\n  }\n\n  generateClassName: generateClassName = createGenerateClassNameDefault()\n\n  constructor(options?: JssOptions) {\n    // eslint-disable-next-line prefer-spread\n    this.use.apply(this, defaultPlugins)\n    this.setup(options)\n  }\n\n  setup(options?: JssOptions = {}): this {\n    if (options.createGenerateClassName) {\n      this.options.createGenerateClassName = options.createGenerateClassName\n      // $FlowFixMe\n      this.generateClassName = options.createGenerateClassName()\n    }\n\n    if (options.insertionPoint != null)\n      this.options.insertionPoint = options.insertionPoint\n    if (options.virtual || options.Renderer) {\n      this.options.Renderer =\n        options.Renderer || (options.virtual ? VirtualRenderer : DomRenderer)\n    }\n\n    // eslint-disable-next-line prefer-spread\n    if (options.plugins) this.use.apply(this, options.plugins)\n\n    return this\n  }\n\n  /**\n   * Create a Style Sheet.\n   */\n  createStyleSheet(\n    styles: Object,\n    options: StyleSheetFactoryOptions = {}\n  ): StyleSheet {\n    let index = options.index\n    if (typeof index !== 'number') {\n      index = sheets.index === 0 ? 0 : sheets.index + 1\n    }\n    const sheet = new StyleSheet(styles, {\n      ...options,\n      jss: (this: Jss),\n      generateClassName: options.generateClassName || this.generateClassName,\n      insertionPoint: this.options.insertionPoint,\n      Renderer: this.options.Renderer,\n      index\n    })\n    this.plugins.onProcessSheet(sheet)\n\n    return sheet\n  }\n\n  /**\n   * Detach the Style Sheet and remove it from the registry.\n   */\n  removeStyleSheet(sheet: StyleSheet): this {\n    sheet.detach()\n    sheets.remove(sheet)\n    return this\n  }\n\n  /**\n   * Create a rule without a Style Sheet.\n   */\n  createRule(\n    name?: string,\n    style?: JssStyle = {},\n    options?: RuleFactoryOptions = {}\n  ): Rule {\n    // Enable rule without name for inline styles.\n    if (typeof name === 'object') {\n      options = style\n      style = name\n      name = undefined\n    }\n\n    // Cast from RuleFactoryOptions to RuleOptions\n    // https://stackoverflow.com/questions/41328728/force-casting-in-flow\n    const ruleOptions: RuleOptions = (options: any)\n\n    ruleOptions.jss = this\n    ruleOptions.Renderer = this.options.Renderer\n    if (!ruleOptions.generateClassName)\n      ruleOptions.generateClassName = this.generateClassName\n    if (!ruleOptions.classes) ruleOptions.classes = {}\n    const rule = createRule(name, style, ruleOptions)\n\n    if (!ruleOptions.selector && rule instanceof StyleRule) {\n      rule.selector = `.${ruleOptions.generateClassName(rule)}`\n    }\n\n    this.plugins.onProcessRule(rule)\n\n    return rule\n  }\n\n  /**\n   * Register plugin. Passed function will be invoked with a rule instance.\n   */\n  use(...plugins: Array<Plugin>): this {\n    plugins.forEach(plugin => {\n      // Avoids applying same plugin twice, at least based on ref.\n      if (this.options.plugins.indexOf(plugin) === -1) {\n        this.options.plugins.push(plugin)\n        this.plugins.use(plugin)\n      }\n    })\n\n    return this\n  }\n}\n","/**\n * Extracts a styles object with only props that contain function values.\n */\nexport default function getDynamicStyles(styles: Object): Object | null {\n  let to = null\n\n  for (const key in styles) {\n    const value = styles[key]\n    const type = typeof value\n\n    if (type === 'function') {\n      if (!to) to = {}\n      to[key] = value\n    } else if (type === 'object' && value !== null && !Array.isArray(value)) {\n      const extracted = getDynamicStyles(value)\n      if (extracted) {\n        if (!to) to = {}\n        to[key] = extracted\n      }\n    }\n  }\n\n  return to\n}\n","/* @flow */\nimport warn from 'warning'\nimport type StyleSheet from './StyleSheet'\n\n/**\n * SheetsManager is like a WeakMap which is designed to count StyleSheet\n * instances and attach/detach automatically.\n */\nexport default class SheetsManager {\n  sheets: Array<StyleSheet> = []\n\n  refs: Array<number> = []\n\n  keys: Array<Object> = []\n\n  get size(): number {\n    return this.keys.length\n  }\n\n  get(key: Object): StyleSheet {\n    const index = this.keys.indexOf(key)\n    return this.sheets[index]\n  }\n\n  add(key: Object, sheet: StyleSheet): number {\n    const {sheets, refs, keys} = this\n    const index = sheets.indexOf(sheet)\n\n    if (index !== -1) return index\n\n    sheets.push(sheet)\n    refs.push(0)\n    keys.push(key)\n\n    return sheets.length - 1\n  }\n\n  manage(key: Object): StyleSheet {\n    const index = this.keys.indexOf(key)\n    const sheet = this.sheets[index]\n    if (this.refs[index] === 0) sheet.attach()\n    this.refs[index]++\n    if (!this.keys[index]) this.keys.splice(index, 0, key)\n    return sheet\n  }\n\n  unmanage(key: Object): void {\n    const index = this.keys.indexOf(key)\n    if (index === -1) {\n      // eslint-ignore-next-line no-console\n      warn(false, \"SheetsManager: can't find sheet to unmanage\")\n      return\n    }\n    if (this.refs[index] > 0) {\n      this.refs[index]--\n      if (this.refs[index] === 0) this.sheets[index].detach()\n    }\n  }\n}\n","/* @flow */\n/**\n * A better abstraction over CSS.\n *\n * @copyright Oleg Slobodskoi 2014-present\n * @website https://github.com/cssinjs/jss\n * @license MIT\n */\nimport Jss from './Jss'\nimport type {JssOptions} from './types'\n\n/**\n * Extracts a styles object with only rules that contain function values.\n */\nexport {default as getDynamicStyles} from './utils/getDynamicStyles'\n\n/**\n * Converts JSS array value to a CSS string.\n */\nexport {default as toCssValue} from './utils/toCssValue'\n\n/**\n * SheetsRegistry for SSR.\n */\nexport {default as SheetsRegistry} from './SheetsRegistry'\n\n/**\n * SheetsManager for react-jss and co.\n */\nexport {default as SheetsManager} from './SheetsManager'\n\n/**\n * RuleList for plugins.\n */\nexport {default as RuleList} from './RuleList'\n\n/**\n * Default global SheetsRegistry instance.\n */\nexport {default as sheets} from './sheets'\n\n/**\n * Class name generator creator.\n */\nexport {\n  default as createGenerateClassName\n} from './utils/createGenerateClassName'\n\n/**\n * Creates a new instance of Jss.\n */\nexport const create = (options?: JssOptions): Jss => new Jss(options)\n\n/**\n * A global Jss instance.\n */\nexport default create()\n"],"names":["linkRule","rule","cssRule","renderable","rules","cssRules","link","join","value","by","result","i","length","toCssValue","ignoreImportant","Array","isArray","cssValue","indentStr","str","indent","index","toCss","selector","style","options","fallbacks","fallback","prop","allowEmpty","StyleRule","key","type","isProcessed","sheet","Renderer","selectorText","renderer","name","undefined","jss","plugins","onChangeValue","isEmpty","isDefined","remove","removeProperty","setProperty","attached","warning","json","toJSON","opts","hasChanged","setSelector","replaceRule","_ponyfill","global","require$$0","$$observable","cloneStyle","typeOfStyle","map","isObservable","newStyle","createRule","decl","declCopy","onCreateRule","CSS","env","process","escapeRegex","escape","replace","RuleList","raw","update","data","onUpdate","get","classes","parent","generateClassName","className","register","splice","unregister","indexOf","slice","forEach","onProcessRule","getUnescapedKeysMap","getKey","css","toString","StyleSheet","styles","deployed","linked","add","deploy","attach","detach","queue","push","insertRule","added","addRule","deleteRule","getRules","PluginsRegistry","hooks","onProcessStyle","onProcessSheet","nextStyle","processedValue","plugin","SimpleRule","KeyframesRule","frames","inner","ConditionalRule","FontFaceRule","ViewportRule","Object","keys","re","RegExp","RuleClass","test","style$","subscribe","styleRule","next","nextValue","now","Date","fnValuesNs","fnStyleNs","fn","fnStyle","SheetsRegistry","registry","filter","ns","maxRules","ruleCounter","defaultPrefix","prefix","jssId","classNamePrefix","id","moduleId","memoize","getPropertyValue","err","message","CSSRuleTypes","STYLE_RULE","KEYFRAMES_RULE","extractKey","cssText","from","substr","getHead","document","head","getElementsByTagName","isAttached","createElement","appendChild","textContent","removeChild","findHigherSheet","insertionPoint","findHighestSheet","findCommentNode","text","childNodes","node","nodeType","nodeValue","trim","findPrevNode","sheets","element","nextElementSibling","comment","nextSibling","insertStyle","prevNode","parentNode","insertBefore","insertionPointElement","getNonce","querySelector","getAttribute","DomRenderer","hasInsertedRules","media","meta","setAttribute","nonce","newCssRule","VirtualRenderer","defaultPlugins","rulesPlugins","concat","observablesPlugin","functionsPlugin","instanceCounter","Jss","version","__VERSION__","createGenerateClassName","createGenerateClassNameDefault","isInBrowser","use","apply","setup","virtual","ruleOptions","getDynamicStyles","to","extracted","SheetsManager","refs","warn","create"],"mappings":"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"}